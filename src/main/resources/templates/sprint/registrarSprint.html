<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <title> Registrar sprint</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
        integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
</head>

<body>
    <div class="container text-justify">
        <form action="#" th:action="@{/scrum/sprints/registrar}" th:object="${sprint}" method="post">
            <div class="form-group">
                <label for="name">Name</label>
                <input type="text" th:field="*{nombre}" id="name" placeholder="nombre" class="form-control">
                <span th:errors="*{nombre}"></span>
            </div>
            <div class="form-group">
                <label for="descripcion">Descripción</label>
                <input type="text" th:field="*{descripcion}" id="descripcion" placeholder="Descripción del Sprint"
                    class="form-control">
                <span th:if="${#fields.hasErrors('descripcion')}" th:errors="*{descripcion}"></span>
            </div>
            <div class="form-group">
                <label for="fechaInicio">Fecha de Inicio</label>
                <input type="date" th:field="*{fechaInicio}" id="fechaInicio" class="form-control" />
                <span th:if="${#fields.hasErrors('fechaInicio')}" th:errors="*{fechaInicio}"></span>
            </div>
            <div class="form-group">
                <label for="fechaFinal">Fecha de Término</label>
                <input type="date" th:field="*{fechaFinal}" id="fechaFinal" class="form-control"
                    onchange="calcular()" />
                <span th:if="${#fields.hasErrors('fechaFinal')}" th:errors="*{fechaFinal}"></span>
                <span th:if="${errorMessage}" th:text="${errorMessage}" id="spanError">ERROR</span>
            </div>
            <div class="form-group">
                <label for="duracion">Duración</label>
                <input type="text" th:field="*{dias}" id="duracion" placeholder="Duración en días"
                    class="form-control  ">
                <span th:if="${#fields.hasErrors('dias')}" th:errors="*{dias}"></span>
            </div>

            <div class="form-group">
                <label for="estatus">Estado del Proyecto</label>
                <input type="text" th:field="*{estado}" id="estatus" placeholder="Estado del Proyecto"
                    class="form-control">
                <span th:if="${#fields.hasErrors('estado')}" th:errors="*{estado}"></span>
            </div>
            <input class="btn btn-primary" type="submit" value="Registrar">
            <a class="btn btn-secondary" href="index">Cancelar</a>
        </form>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct"
        crossorigin="anonymous"></script>

    <script>
        function calculardiasDiscount() {
            var fechaini = new Date(document.getElementById('fechaInicio').value);
            var fechafin = new Date(document.getElementById('fechaFinal').value);
            var diasdif = fechafin.getTime() - fechaini.getTime();
            var contdias = Math.round(diasdif / (1000 * 60 * 60 * 24));
            alert(contdias);
        }

        function calcular() {
            var timeStart = new Date(document.getElementById("fechaInicio").value);
            var timeEnd = new Date(document.getElementById("fechaFinal").value);
            document.getElementById("duracion").value = 0;
            if (timeEnd > timeStart) {
                var diff = timeEnd.getTime() - timeStart.getTime();
                document.getElementById("duracion").value = Math.round(diff / (1000 * 60 * 60 * 24));
            } else if (timeEnd != null && timeEnd < timeStart) {
                alert("Verifique las fechas");
            }
        }

        function sumarFecha() {
            var fecha = new Date(document.getElementById("fechaInicio").value);
            //var dias = 2; // Número de días a agregar
            fecha.setDate(fecha.getDate() + 4);
            document.getElementById("fechaInicio").value = fecha.toDateString;
            alert(fecha)
        }
    </script>
</body>

</html>